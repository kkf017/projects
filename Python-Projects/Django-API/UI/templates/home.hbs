<!DOCTYPE html>
<html>
<head>

  <title></title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo">

    <!--- Itim, Exo, Concert+One, Neucha, Chewy --->

<style>
  body, h1,h2,h3,h4,h5,h6 {font-family: "Exo", sans-serif}
  .w3-row-padding img {margin-bottom: 12px}
  
  .w3-sidebar {width: 120px;background: #222;}
  #main {margin-left: 120px}
  @media only screen and (max-width: 600px) {#main {margin-left: 0}}
  
</style>
</head>



<body class="w3-light-grey">

    <!-- Icon Bar (Sidebar - hidden on small screens) -->
    <nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center w3-white">
      <p></p>

        <!--<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ2-fcpYBS-xYnPLV6XFZW3QpPrSIrJEwqqRIJWe68ptIp-DcY3nxG75LaEoMHPP1lsLBM&usqp=CAU" style="width:85%">--->
        
         <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBPrZztJePvk8YdgvUzTw0He-qpQRLlkWBa7IkZTB2Z-mfy8qfvl-0vhVjwrUxYAOBU6c&usqp=CAU" style="width:85%">

      <a href="/home/" class="w3-bar-item w3-button w3-padding-large w3-white">
        <i class="fa fa-home w3-xxlarge"></i>
        <p>HOME</p>
      </a>
      <a href="/about/" class="w3-bar-item w3-button w3-padding-large w3-white">
        <i class="fa fa-user w3-xxlarge"></i>
        <p>ABOUT</p>
      </a>
      <a href="/" class="w3-bar-item w3-button w3-padding-large w3-white">
        <i class="fa fa-key w3-xxlarge"></i>
        <p>Logout</p>
      </a>
    </nav>

    <!-- Navbar on small screens -->
    <div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
      <div class="w3-bar w3--light-grey w3-opacity w3-hover-opacity-off w3-center w3-small">
        <a href="/home/{{uid}}" class="w3-bar-item w3-button" style="width:25% !important">HOME</a>
        <a href="/new/{{uid}}" class="w3-bar-item w3-button" style="width:25% !important">NEW</a>
        <a href="/about/{{uid}}" class="w3-bar-item w3-button" style="width:25% !important">ABOUT</a>
        <a href="/" class="w3-bar-item w3-button" style="width:25% !important">LOGOUT</a>
      </div>
    </div>
    <!-- End Icon Bar (Sidebar - hidden on small screens) -->


    <!-- Page Content -->
    <div class="w3-padding-large" id="main">
          
        <h1><strong>Dashboard</strong></h1>
        
		
	  <div class="w3-row-padding w3-margin-bottom">
	    <div class="w3-quarter">
	      <div class="w3-container w3-red w3-padding-16">
		<div class="w3-left"><i class="fa fa-comment w3-xxxlarge"></i></div>
		<div class="w3-right">
		  <h3>52</h3>
		</div>
		<div class="w3-clear"></div>
		<h4>Messages</h4>
	      </div>
	    </div>
	    <div class="w3-quarter">
	      <div class="w3-container w3-blue w3-padding-16">
		<div class="w3-left"><i class="fa fa-eye w3-xxxlarge"></i></div>
		<div class="w3-right">
		  <h3>99</h3>
		</div>
		<div class="w3-clear"></div>
		<h4>Views</h4>
	      </div>
	    </div>
	    <div class="w3-quarter">
	      <div class="w3-container w3-teal w3-padding-16">
		<div class="w3-left"><i class="fa fa-share-alt w3-xxxlarge"></i></div>
		<div class="w3-right">
		  <h3>23</h3>
		</div>
		<div class="w3-clear"></div>
		<h4>Shares</h4>
	      </div>
	    </div>
	    <div class="w3-quarter">
	      <div class="w3-container w3-orange w3-text-white w3-padding-16">
		<div class="w3-left"><i class="fa fa-users w3-xxxlarge"></i></div>
		<div class="w3-right">
		  <h3>50</h3>
		</div>
		<div class="w3-clear"></div>
		<h4>Users</h4>
	      </div>
	    </div>
	  </div>
	  
  
        
          <div class="w3-section w3-bottombar w3-padding-16">
	    <hr>
            <div class="w3-panel">
		    <div class="w3-row-padding" style="margin:0 -16px">
		      <div class="w3-quarter">
			<!--<form action="/action_page.php" target="_blank">-->
			      <p><label>Type</label></p>
			      <select class="w3-select w3-white" name="Type" id="type-select">
			      		<option value="None">---</option>
			      		<option value="solar">solar</option>
			      		<option value="wind">wind</option>
			      		<option value="hydro">hydro</option>
			      		<option value="nuclear">nuclear</option>
			      </select>  
			              
			      <p><label>Status</label></p>
			      <select class="w3-select w3-white" name="status" id="status-select">
			      		<option value="None">---</option>
			      		<option value="active">active</option>
			      		<option value="inactive">inactive</option>
			      		<option value="maintenance">maintenance</option>
			      </select>
			           
			      <p><label>Max (capacity)</label></p>
			      <input class="w3-input w3-border" type="number" value="0" id="max-capacity" min="0">              
			      <p><label>Min (capacity)</label></p>
			      <input class="w3-input w3-border" type="number" value="0" id="min-capacity" min="0">
			      <p><button class="w3-button w3-block w3-green w3-center-align" onclick="searchRessources()" type="submit"><i class="fa fa-search w3-margin-right"></i> Search</button></p>
		    <!--</form> -->
		    </div>
		      
		      <div class="w3-threequarter">
			<h5>Ressources</h5>
			<table class="w3-table w3-striped w3-white" id="ressources-table">
			  
			  <tr>
			     <td> <i class="fa fa-circle w3-text-blue w3-large"></i> </td>
			    <td>Ressource</td>
			    <td>Location</td>
			    <td><i>Capacity</i></td>
			    <td>Status</td>
			  </tr>
			  
			 
			</table>
		      </div>
		    </div>
	   </div>
           <hr>			     
           

     </div>
    <!-- End Page Content -->     

    </div>


    <!--- Footer --->
    <footer class="">
        <div class="w3-center w3-padding-24">Powered by <a href="https://github.com/kkf017" target="_blank" class="w3-hover-opacity">@me</a></div>
    </footer>
    <!--- End Footer --->

</body>


<script>
	const resp = {"ressources": [{"id": 30, "eid": "151997d9e640f530cdf2a6b55efdf193270d3405", "name": "Solar Farm 1", "types": "solar", "capacity": 100.5, "location": "Location A", "status": "active"}, {"id": 31, "eid": "ab442bfbc8a09d9deedd1046f26f817213086f74", "name": "Wind Farm 1", "types": "wind", "capacity": 200.0, "location": "Location B", "status": "active"}, {"id": 32, "eid": "f1156e4a60fc6273b31e0637b1ab0531c7cfd3ba", "name": "Hydro Plant 1", "types": "hydro", "capacity": 300.0, "location": "Location C", "status": "inactive"}, {"id": 33, "eid": "7feb8269fa577e107140f2ec2b5793f18da5662f", "name": "Nuclear Plant 1", "types": "nuclear", "capacity": 400.0, "location": "Location D", "status": "maintenance"}, {"id": 34, "eid": "e62db8400b1819c5c91fbd890b66f14f7db98e7a", "name": "Solar Farm 2", "types": "solar", "capacity": 150.0, "location": "Location E", "status": "active"}, {"id": 35, "eid": "9e7f6d29cc7c5adb45c2345c95c9ae46cef50d6e", "name": "Wind Farm 2", "types": "wind", "capacity": 250.0, "location": "Location F", "status": "inactive"}, {"id": 36, "eid": "d42272f478e610110bffead7d9ea10dbd927d721", "name": "Hydro Plant 2", "types": "hydro", "capacity": 350.0, "location": "Location G", "status": "maintenance"}, {"id": 37, "eid": "5ce869ef0d47adbcc11168e828cf9f11c07369c5", "name": "Nuclear Plant 2", "types": "nuclear", "capacity": 450.0, "location": "Location H", "status": "active"}]}
	
	window.onload = () => { displayRessources(resp.ressources) }
	
        const TABLE_LINE_COLOR = ["w3-white", "w3-light-grey"];
	
	function selectRessources(resc, types, status, maximum, minimum){
		if(!(types === "None")){
			resc = resc.filter( element => element.types === types);
		}
		
		if(!(status === "None")){
			resc = resc.filter( element => element.status == status);
		}
		
		if(!(maximum === 0)){
			resc = resc.filter( element => element.capacity <= maximum);
		}
		
		if(!(minimum === 0)){
			resc = resc.filter( element => element.capacity >= minimum);
		}
	
		return resc;
	}
	
	function searchRessources(){
		let types = document.getElementById('type-select').value;
		let status = document.getElementById('status-select').value;
		let maximum = document.getElementById('max-capacity').value;
		let minimum = document.getElementById('min-capacity').value;
		
		let resc = selectRessources(resp.ressources, types, status, parseFloat(maximum), parseFloat(minimum));
		
		displayRessources(resc)
		
		//updateStatisticsRessources()
	}
    
	function displayRessources(ressources){
	   	let div = document.getElementById('ressources-table');
		div.innerHTML = '';
		
		div.innerHTML +=  `<tr>
			     <td> </td>
			    <td><strong>Ressource<strong></td>
			    <td><strong>Location<strong></td>
			    <td><i><strong>Capacity<strong></i></td>
			    <td><strong>Status<strong></td>
			  </tr>`;
		
		let flag = 1;	
		for(i = 0; i < ressources.length; i++){
		
			switch(ressources[i].status) {
			  case "active":
			    fa_color = "w3-text-green";
			    break;
			  case "inactive":
			    fa_color = "w3-text-red";
			    break;
			  default:
			    fa_color = "w3-text-grey";
			}
			
			div.innerHTML +=  `<tr class="${TABLE_LINE_COLOR[flag%2]}">
					      <td> <i class="fa fa-circle ${fa_color} w3-large"></i> </td>
					      <td>${ressources[i].name}</td>
					      <td>${ressources[i].location}</td>
					      <td><i>${ressources[i].capacity}</i></td>
					      <td>${ressources[i].status}</td>
					    </tr>`;
			flag += 1;
		}
		div.innerHTML += '';
	}
    
</script>


</html>
